(this["webpackJsonpsmart-home"]=this["webpackJsonpsmart-home"]||[]).push([[0],{33:function(e,t,o){},34:function(e,t,o){},35:function(e,t,o){},41:function(e,t,o){},42:function(e,t,o){},43:function(e,t,o){},44:function(e,t,o){},45:function(e,t,o){},48:function(e,t,o){},49:function(e,t,o){},70:function(e,t,o){"use strict";o.r(t);var n=o(0),c=o(1),i=o.n(c),r=o(25),a=o.n(r),s=(o(33),o(6)),d=o(13),l=o(3),u=(o(34),{SET_STORAGE:"setStorage",ADD_ROOM:"addRoom",REMOVE_ROME:"removeRoom",TOGGLE_ROOM:"toggleRoom",ADD_DEVICE:"addDevice",REMOVE_DEVICE:"removeDevice",TOGGLE_DEVICE:"toggleDevice",SET_SLIDER:"setSlider"}),m=o(4),j=function(e,t){switch(t.type){case u.SET_STORAGE:return t.payload.newStorage;case u.ADD_ROOM:return e.addRoom(t.payload.newRoom);case u.REMOVE_ROME:return e.removeRoom(t.payload.removedRoomId);case u.TOGGLE_ROOM:return Object(m.b)(e,(function(e){e.roomList[t.payload.toggledRoomId]=e.roomList[t.payload.toggledRoomId].toggleRoom()}));case u.ADD_DEVICE:return Object(m.b)(e,(function(e){var o=t.payload.roomId,n=t.payload.deviceName;e.roomList[o]=e.roomList[o].addDevice(n)}));case u.REMOVE_DEVICE:return Object(m.b)(e,(function(e){var o=t.payload.roomId,n=t.payload.deviceId;e.roomList[o]=e.roomList[o].removeDevice(n)}));case u.TOGGLE_DEVICE:return Object(m.b)(e,(function(e){var o=t.payload.roomId,n=t.payload.deviceId;e.roomList[o].deviceList[n]=e.roomList[o].deviceList[n].toggleSwitch()}));case u.SET_SLIDER:return Object(m.b)(e,(function(e){var o=t.payload.roomId,n=t.payload.deviceId,c=t.payload.numericValue;e.roomList[o].deviceList[n]=e.roomList[o].deviceList[n].setSliderValue(c)}));default:return e}},v=o(17),O=o(18),b=o(72),h=o(10),f={Lamp:{name:"Lamp",slider:!0,isNonToggled:!1,icon:h.b,sliderDescription:"Brightness",sliderUnits:"%",sliderRange:[0,100],defaultValue:50},Fridge:{name:"Fridge",slider:!1,isNonToggled:!0,icon:h.d},"Air conditioner":{name:"Air conditioner",slider:!0,isNonToggled:!1,icon:h.g,sliderDescription:"Temperature",sliderUnits:"\xb0C",sliderRange:[16,30],defaultValue:20},TV:{name:"TV",slider:!0,isNonToggled:!1,icon:h.f,sliderDescription:"Volume",sliderUnits:"%",sliderRange:[0,100],defaultValue:30}},p=function(){function e(t){if(Object(v.a)(this,e),void 0===f[t])throw new Error("No such device!");this[m.a]=!0,this.name=f[t].name,this.slider=f[t].slider,this.isNonToggled=f[t].isNonToggled,this.powerOn=!0,this.id=Object(b.a)(),this.slider&&(this.sliderValue=f[t].defaultValue,this.sliderRange=f[t].sliderRange)}return Object(O.a)(e,[{key:"toggleSwitch",value:function(){return Object(m.b)(this,(function(e){e.powerOn=!e.powerOn}))}},{key:"setSliderValue",value:function(e){return Object(m.b)(this,(function(t){t.slider&&(t.sliderValue=e)}))}}]),e}(),g=function(){function e(t){Object(v.a)(this,e),this[m.a]=!0,this.name=t,this.deviceList=[],this.roomSwitchOn=!0,this.previouslyPowerOn=[]}return Object(O.a)(e,[{key:"addDevice",value:function(e){var t=new p(e);return Object(m.b)(this,(function(e){e.deviceList.push(t)}))}},{key:"removeDevice",value:function(e){return Object(m.b)(this,(function(t){t.deviceList.splice(e,1)}))}},{key:"toggleRoom",value:function(){var e=this;return Object(m.b)(this,(function(t){e.roomSwitchOn?(t.roomSwitchOn=!1,t.previouslyPowerOn=t.deviceList.filter((function(e){return e.powerOn})).map((function(e){return e.id})),t.deviceList=t.deviceList.map((function(e){return e.isNonToggled||!e.powerOn?e:e.toggleSwitch()}))):(t.deviceList=t.deviceList.map((function(e){return!e.powerOn&&t.previouslyPowerOn.includes(e.id)?e.toggleSwitch():e})),t.previouslyPowerOn=[],t.roomSwitchOn=!0)}))}}]),e}(),_=function(){function e(t){Object(v.a)(this,e),this[m.a]=!0,this.owner=t,this.roomList=[],this.createDefaultRoom("Living room")}return Object(O.a)(e,[{key:"addRoom",value:function(e){var t=new g(e);return Object(m.b)(this,(function(e){e.roomList.push(t)}))}},{key:"removeRoom",value:function(e){return Object(m.b)(this,(function(t){t.roomList.splice(e,1)}))}},{key:"createDefaultRoom",value:function(e){var t=new g(e),o=new p("Fridge"),n=new p("Lamp"),c=new p("TV"),i=new g("Bathroom"),r=new p("Lamp");t.deviceList.push(o),t.deviceList.push(n),t.deviceList.push(c),i.deviceList.push(r),this.roomList.push(t),this.roomList.push(i)}}]),e}(),x=function(e){return{type:u.SET_STORAGE,payload:{newStorage:e}}},y=o(21);o(35);var N=o(11);o(41);var E=function(e){var t=e.onClick;return Object(n.jsx)("button",{className:"add__button",onClick:t,children:Object(n.jsx)(N.a,{icon:h.c})})};var R=function(e){var t=e.setIsRoomAdd,o=e.isRoomAdd,i=e.setRoomName,r=e.roomName,a=e.addRoom,s=Object(c.useRef)(null),d=function(e){null===s.current||s.current.contains(e.target)||t(!1)};return Object(c.useEffect)((function(){return document.addEventListener("mousedown",d),function(){document.removeEventListener("mousedown",d)}})),o?Object(n.jsxs)("div",{className:"display__flex",ref:s,children:[Object(n.jsx)("input",{placeholder:"Enter room name",onChange:function(e){return i(e.target.value)},value:r}),Object(n.jsx)(E,{onClick:a})]}):Object(n.jsx)(E,{onClick:function(){return t(!0)}})};o(42);var w=function(e){var t=e.toggleAction,o=e.checkedValue;return Object(n.jsxs)("label",{className:"switch",onClick:function(e){e.stopPropagation()},children:[Object(n.jsx)("input",{type:"checkbox",id:"togBtn",onChange:t,checked:o}),Object(n.jsxs)("div",{className:"slider round",children:[Object(n.jsx)("span",{className:"on",children:"On"}),Object(n.jsx)("span",{className:"off",children:"Off"})]})]})};o(43);var L=function(e){var t=e.onClick;return Object(n.jsx)("button",{className:"delBtn",onClick:function(e){e.stopPropagation(),e.preventDefault(),t()},children:Object(n.jsx)(N.a,{icon:h.e})})};o(44);var D=function(e){var t=e.deleteAction,o=e.CancelAction,c=e.elementName;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{className:"delete__message",children:["Are you sure you want to delete this ",c,"? "]}),Object(n.jsxs)("div",{className:"delete__btn-container",children:[Object(n.jsx)("button",{className:"delete__btn",onClick:t,children:"Yes"}),Object(n.jsx)("button",{className:"delete__btn",onClick:o,children:"No"})]})]})};o(45);var S=function(e){var t=e.id,o=e.room,i=e.toggleRoom,r=e.delRoom,a=Object(c.useState)(!1),l=Object(s.a)(a,2),u=l[0],m=l[1];return u?Object(n.jsx)("div",{className:"room",children:Object(n.jsx)(D,{deleteAction:function(){r(t),m(!1)},CancelAction:function(){return m(!1)},elementName:"room"})}):Object(n.jsx)(d.b,{to:"/room/".concat(t),children:Object(n.jsxs)("div",{className:"room",children:[Object(n.jsx)("h4",{className:"room__name",children:o.name}),Object(n.jsxs)("p",{className:"room__devices",children:[o.deviceList.length," devices"]}),Object(n.jsx)("div",{className:"room__trash",children:Object(n.jsx)(L,{onClick:function(){return m(!0)}})}),Object(n.jsx)(w,{toggleAction:function(){i(t)},checkedValue:o.roomSwitchOn})]})})};var I=function(e){var t=e.addNewRoom,o=e.homeState,i=e.delRoom,r=e.toggleRoom,a=Object(c.useState)(!1),d=Object(s.a)(a,2),l=d[0],u=d[1],m=Object(c.useState)(""),j=Object(s.a)(m,2),v=j[0],O=j[1],b=o.roomList.map((function(e,t){return Object(n.jsx)(S,{id:t,room:e,delRoom:i,toggleRoom:r},t)}));return Object(n.jsxs)("div",{className:"home-page",children:[Object(n.jsxs)("div",{className:"home-page__header",children:[Object(n.jsxs)("div",{className:"home-page__header__user-info",children:[Object(n.jsx)("img",{className:"home-page__header__user-photo",src:"user.png",alt:"User 1"}),Object(n.jsxs)("h2",{className:"heading-text",children:["Hello ",o.owner,"!"]}),Object(n.jsx)("p",{className:"paragraph-text",children:"Welcome to Home!"})]}),Object(n.jsx)("div",{className:"home-page__header__add",children:Object(n.jsx)(R,{addRoom:function(){""===v?alert("Enter room name"):(u(!1),t(v),O(""))},isRoomAdd:l,setIsRoomAdd:u,roomName:v,setRoomName:O})})]}),Object(n.jsx)("div",{className:"rooms-container",children:b})]})};o(48);var V=function(e){var t=e.device,o=e.toggleDevice,i=e.setSlider,r=e.deleteDevice,a=e.id,d=Object(c.useState)(t.sliderValue),l=Object(s.a)(d,2),u=l[0],m=l[1],j=Object(c.useState)(!1),v=Object(s.a)(j,2),O=v[0],b=v[1],h=null,p=null,g=function(){i(a,u)};if(t.slider){var _=Object(s.a)(t.sliderRange,2),x=_[0],y=_[1];p=Object(n.jsx)("div",{className:"device-card__slider",children:Object(n.jsx)("input",{type:"range",min:x,max:y,value:u,onMouseUp:g,onTouchEnd:g,onChange:function(e){var t=Number(e.target.value);m(t)}})});var E="".concat(f[t.name].sliderDescription,": \n        ").concat(u," \n        ").concat(f[t.name].sliderUnits);h=Object(n.jsx)("p",{className:"device-card__detail",children:E})}return O?Object(n.jsx)("div",{className:"device-card__delete",children:Object(n.jsx)(D,{deleteAction:function(){b(!1),r(a)},CancelAction:function(){return b(!1)},elementName:"device"})}):Object(n.jsxs)("div",{className:"device-card",children:[Object(n.jsx)(N.a,{icon:f[t.name].icon,className:"device-card__icon"}),Object(n.jsxs)("div",{className:"device-card__info",children:[Object(n.jsx)("h4",{className:"device-card__name",children:t.name}),h]}),Object(n.jsx)(w,{toggleAction:function(){o(a)},checkedValue:t.powerOn}),p,Object(n.jsx)("div",{className:"device-card__trash",children:Object(n.jsx)(L,{onClick:function(){return b(!0)}})})]})};var C=function(e){var t=e.addDevice,o=e.isDeviceAdded,i=e.setIsDeviceAdd,r=e.deviceName,a=e.setDeviceName,s=Object(c.useRef)(null),d=[],l=1,u=function(e){null===s.current||s.current.contains(e.target)||i(!1)};Object(c.useEffect)((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}));var m=Object(n.jsx)("option",{value:"",disabled:!0,children:"Choose device"},0);for(var j in d.push(m),f){var v=l++,O=Object(n.jsx)("option",{value:j,children:j},v);d.push(O)}return o?Object(n.jsxs)("div",{className:"display__flex",ref:s,children:[Object(n.jsx)("select",{className:"margin-left-right-1",value:r,onChange:function(e){return a(e.target.value)},children:d}),Object(n.jsx)(E,{onClick:function(){return t(r)}})]}):Object(n.jsx)(E,{onClick:function(){return i(!0)}})};o(49);var A=function(e,t,o){var i=e.match,r=Object(c.useState)(!1),a=Object(s.a)(r,2),l=a[0],m=a[1],j=Object(c.useState)(""),v=Object(s.a)(j,2),O=v[0],b=v[1],f=Number(i.params.id),p=t.roomList[f],g=function(e){if("number"!==typeof e)throw new Error("Device id should be typ of number");o(function(e,t){return{type:u.REMOVE_DEVICE,payload:{roomId:e,deviceId:t}}}(f,e))},_=function(e){if("number"!==typeof e)throw new Error("Device id should be typ of number");o(function(e,t){return{type:u.TOGGLE_DEVICE,payload:{roomId:e,deviceId:t}}}(f,e))},x=function(e,t){if("number"!==typeof t)throw new Error("Value should be typ of number");if("number"!==typeof e)throw new Error("Device id should be typ of number");o(function(e,t,o){return{type:u.SET_SLIDER,payload:{roomId:e,deviceId:t,numericValue:o}}}(f,e,t))},y=p.deviceList.map((function(e,t){return Object(n.jsx)(V,{id:t,device:e,toggleDevice:_,setSlider:x,deleteDevice:g},t)}));return Object(n.jsxs)("div",{className:"room-page",children:[Object(n.jsxs)("div",{className:"room-page__header",children:[Object(n.jsx)(d.b,{to:"/",className:"room-page__back",children:Object(n.jsx)(N.a,{icon:h.a})}),Object(n.jsx)("h3",{className:"room-page__name",children:p.name}),Object(n.jsx)("div",{className:"room-page__header__add",children:Object(n.jsx)(C,{addDevice:function(){""===O?alert("Enter device name"):(m(!1),o(function(e,t){return{type:u.ADD_DEVICE,payload:{roomId:e,deviceName:t}}}(f,O)),b(""))},isDeviceAdded:l,setIsDeviceAdd:m,deviceName:O,setDeviceName:b})})]}),Object(n.jsx)("div",{className:"room-page__devices",children:y})]})},k=o(27),T=o.n(k);o(69);var M=function(){return Object(n.jsx)(T.a,{type:"Oval",color:"#fff",height:100,width:100,timeout:3e3})},G="my-smart-home-app";var P=function(){var e=Object(c.useReducer)(j,null),t=Object(s.a)(e,2),o=t[0],i=t[1];return Object(c.useEffect)((function(){if(null===o)if(n=G,localStorage.getItem(n)){var e=function(e){var t=JSON.parse(localStorage.getItem(e));Object.setPrototypeOf(t,_.prototype),t[m.a]=!0;var o,n=Object(y.a)(t.roomList);try{for(n.s();!(o=n.n()).done;){var c=o.value;c[m.a]=!0,Object.setPrototypeOf(c,g.prototype);var i,r=Object(y.a)(c.deviceList);try{for(r.s();!(i=r.n()).done;){var a=i.value;a[m.a]=!0,Object.setPrototypeOf(a,p.prototype)}}catch(s){r.e(s)}finally{r.f()}}}catch(s){n.e(s)}finally{n.f()}return t}(G);i(x(e))}else{var t=new _("Olga");i(x(t))}else!function(e,t){localStorage.getItem(e)!==JSON.stringify(t)&&localStorage.setItem(e,JSON.stringify(t))}(G,o);var n}),[o]),null===o?Object(n.jsx)("div",{className:"loader",children:Object(n.jsx)(M,{})}):Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(d.a,{basename:"/move-closer-recruitment/",children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(I,{homeState:o,addNewRoom:function(e){i({type:u.ADD_ROOM,payload:{newRoom:e}})},delRoom:function(e){i({type:u.REMOVE_ROME,payload:{removedRoomId:e}})},toggleRoom:function(e){i({type:u.TOGGLE_ROOM,payload:{toggledRoomId:e}})}})}),Object(n.jsx)(l.a,{path:"/room/:id",component:function(e){return A(e,o,i)}})]})})})};a.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(P,{})}),document.getElementById("root"))}},[[70,1,2]]]);
//# sourceMappingURL=main.6bdcf01a.chunk.js.map