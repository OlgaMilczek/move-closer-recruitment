(this["webpackJsonpsmart-home"]=this["webpackJsonpsmart-home"]||[]).push([[0],{30:function(e,t,o){},31:function(e,t,o){},32:function(e,t,o){},38:function(e,t,o){},39:function(e,t,o){},40:function(e,t,o){},41:function(e,t,o){},42:function(e,t,o){},45:function(e,t,o){},46:function(e,t,o){},47:function(e,t,o){"use strict";o.r(t);var n=o(0),c=o(1),i=o.n(c),r=o(23),s=o.n(r),a=(o(30),o(6)),d=o(13),l=o(3),u=(o(31),{ADD_ROOM:"addRoom",REMOVE_ROME:"removeRoom",TOGGLE_ROOM:"toggleRoom",ADD_DEVICE:"addDevice",REMOVE_DEVICE:"removeDevice",TOGGLE_DEVICE:"toggleDevice",SET_SLIDER:"setSlider"}),m=o(5),j=function(e,t){switch(t.type){case u.ADD_ROOM:return e.addRoom(t.payload.newRoom);case u.REMOVE_ROME:return e.removeRoom(t.payload.removedRoomId);case u.TOGGLE_ROOM:return Object(m.b)(e,(function(e){e.roomList[t.payload.toggledRoomId]=e.roomList[t.payload.toggledRoomId].toggleRoom()}));case u.ADD_DEVICE:return Object(m.b)(e,(function(e){var o=t.payload.roomId,n=t.payload.deviceName;e.roomList[o]=e.roomList[o].addDevice(n)}));case u.REMOVE_DEVICE:return Object(m.b)(e,(function(e){var o=t.payload.roomId,n=t.payload.deviceId;e.roomList[o]=e.roomList[o].removeDevice(n)}));case u.TOGGLE_DEVICE:return Object(m.b)(e,(function(e){var o=t.payload.roomId,n=t.payload.deviceId;e.roomList[o].deviceList[n]=e.roomList[o].deviceList[n].toggleSwitch()}));case u.SET_SLIDER:return Object(m.b)(e,(function(e){var o=t.payload.roomId,n=t.payload.deviceId,c=t.payload.numericValue;e.roomList[o].deviceList[n]=e.roomList[o].deviceList[n].setSliderValue(c)}));default:return e}},v=o(16),h=o(17),b=o(10),O={Lamp:{name:"Lamp",slider:!0,isNonToggled:!1,icon:b.b,sliderDescription:"Brightness",sliderUnits:"%",sliderRange:[0,100],defaultValue:50},Fridge:{name:"Fridge",slider:!1,isNonToggled:!0,icon:b.d},"Air conditioner":{name:"Air conditioner",slider:!0,isNonToggled:!1,icon:b.g,sliderDescription:"Temperature",sliderUnits:"\xb0C",sliderRange:[16,30],defaultValue:20},TV:{name:"TV",slider:!0,isNonToggled:!1,icon:b.f,sliderDescription:"Volume",sliderUnits:"%",sliderRange:[0,100],defaultValue:30}},f=function(){function e(t){if(Object(v.a)(this,e),void 0===O[t])throw new Error("No such device!");this[m.a]=!0,this.name=O[t].name,this.slider=O[t].slider,this.isNonToggled=O[t].isNonToggled,this.powerOn=!0,this.slider&&(this.sliderValue=O[t].defaultValue,this.sliderRange=O[t].sliderRange)}return Object(h.a)(e,[{key:"toggleSwitch",value:function(){return this.isNonToggled?(alert("You can't turn off this device"),this):Object(m.b)(this,(function(e){e.powerOn=!e.powerOn}))}},{key:"setSliderValue",value:function(e){return Object(m.b)(this,(function(t){t.slider&&(t.sliderValue=e)}))}}]),e}(),p=function(){function e(t){Object(v.a)(this,e),this[m.a]=!0,this.name=t,this.deviceList=[],this.roomSwitchOn=!0,this.previousState=[]}return Object(h.a)(e,[{key:"addDevice",value:function(e){var t=new f(e);return Object(m.b)(this,(function(e){e.deviceList.push(t)}))}},{key:"removeDevice",value:function(e){return Object(m.b)(this,(function(t){t.deviceList.splice(e,1)}))}},{key:"toggleRoom",value:function(){var e=this;return Object(m.b)(this,(function(t){e.roomSwitchOn?(t.roomSwitchOn=!1,t.previousState=t.deviceList,t.deviceList=t.deviceList.map((function(e){return e.isNonToggled||!e.powerOn?e:e.toggleSwitch()}))):(t.deviceList=t.previousState,t.previousState=[],t.roomSwitchOn=!0)}))}}]),e}(),g=function(){function e(t){Object(v.a)(this,e),this[m.a]=!0,this.owner=t,this.roomList=[],this.createDefaultRoom("Living room")}return Object(h.a)(e,[{key:"addRoom",value:function(e){var t=new p(e);return Object(m.b)(this,(function(e){e.roomList.push(t)}))}},{key:"removeRoom",value:function(e){return Object(m.b)(this,(function(t){t.roomList.splice(e,1)}))}},{key:"createDefaultRoom",value:function(e){var t=new p(e),o=new f("Fridge"),n=new f("Lamp"),c=new f("TV"),i=new p("Bathroom"),r=new f("Lamp");t.deviceList.push(o),t.deviceList.push(n),t.deviceList.push(c),i.deviceList.push(r),this.roomList.push(t),this.roomList.push(i)}}]),e}(),_=(o(32),o(11));o(38);var x=function(e){var t=e.onClick;return Object(n.jsx)("button",{className:"add__button",onClick:t,children:Object(n.jsx)(_.a,{icon:b.c})})};var N=function(e){var t=Object(c.useRef)(null),o=function(o){null===t.current||t.current.contains(o.target)||e.setIsRoomAdd(!1)};return Object(c.useEffect)((function(){return document.addEventListener("mousedown",o),function(){document.removeEventListener("mousedown",o)}})),e.isRoomAdd?Object(n.jsxs)("div",{className:"display__flex",ref:t,children:[Object(n.jsx)("input",{placeholder:"Enter room name",onChange:function(t){return e.setRoomName(t.target.value)},value:e.roomName}),Object(n.jsx)(x,{onClick:e.addRoom})]}):Object(n.jsx)(x,{onClick:function(){return e.setIsRoomAdd(!0)}})};o(39);var R=function(e){var t=e.toggleAction,o=e.checkedValue;return Object(n.jsxs)("label",{className:"switch",onClick:function(e){e.stopPropagation()},children:[Object(n.jsx)("input",{type:"checkbox",id:"togBtn",onChange:t,checked:o}),Object(n.jsxs)("div",{className:"slider round",children:[Object(n.jsx)("span",{className:"on",children:"On"}),Object(n.jsx)("span",{className:"off",children:"Off"})]})]})};o(40);var E=function(e){var t=e.onClick;return Object(n.jsx)("button",{className:"delBtn",onClick:function(e){e.stopPropagation(),e.preventDefault(),t()},children:Object(n.jsx)(_.a,{icon:b.e})})};o(41);var D=function(e){var t=e.deleteAction,o=e.CancelAction,c=e.elementName;return Object(n.jsxs)("div",{children:[Object(n.jsxs)("p",{className:"delete__message",children:["Are you sure you want to delete this ",c,"? "]}),Object(n.jsxs)("div",{className:"delete__btn-container",children:[Object(n.jsx)("button",{className:"delete__btn",onClick:t,children:"Yes"}),Object(n.jsx)("button",{className:"delete__btn",onClick:o,children:"No"})]})]})};o(42);var L=function(e){var t=Object(c.useState)(!1),o=Object(a.a)(t,2),i=o[0],r=o[1];return i?Object(n.jsx)("div",{className:"room",children:Object(n.jsx)(D,{deleteAction:function(){e.delRoom(e.id),r(!1)},CancelAction:function(){return r(!1)},elementName:"room"})}):Object(n.jsx)(d.b,{to:"/room/".concat(e.id),children:Object(n.jsxs)("div",{className:"room",children:[Object(n.jsx)("h4",{className:"room__name",children:e.room.name}),Object(n.jsxs)("p",{className:"room__devices",children:[e.room.deviceList.length," devices"]}),Object(n.jsx)("div",{className:"room__trash",children:Object(n.jsx)(E,{onClick:function(){return r(!0)}})}),Object(n.jsx)(R,{toggleAction:function(){e.toggleRoom(e.id)},checkedValue:e.room.roomSwitchOn})]})})};var y=function(e){var t=e.addNewRoom,o=e.homeState,i=e.delRoom,r=e.toggleRoom,s=Object(c.useState)(!1),d=Object(a.a)(s,2),l=d[0],u=d[1],m=Object(c.useState)(""),j=Object(a.a)(m,2),v=j[0],h=j[1],b=o.roomList.map((function(e,t){return Object(n.jsx)(L,{id:t,room:e,delRoom:i,toggleRoom:r},t)}));return Object(n.jsxs)("div",{className:"home-page",children:[Object(n.jsxs)("div",{className:"home-page__header",children:[Object(n.jsxs)("div",{className:"home-page__header__user-info",children:[Object(n.jsx)("img",{className:"home-page__header__user-photo",src:"user.png",alt:"User 1"}),Object(n.jsxs)("h2",{className:"heading-text",children:["Hello ",o.owner,"!"]}),Object(n.jsx)("p",{className:"paragraph-text",children:"Welcome to Home!"})]}),Object(n.jsx)("div",{className:"home-page__header__add",children:Object(n.jsx)(N,{addRoom:function(){""===v?alert("Enter room name"):(u(!1),t(v),h(""))},isRoomAdd:l,setIsRoomAdd:u,roomName:v,setRoomName:h})})]}),Object(n.jsx)("div",{className:"rooms-container",children:b})]})};o(45);var w=function(e){var t=Object(c.useState)(e.device.sliderValue),o=Object(a.a)(t,2),i=o[0],r=o[1],s=Object(c.useState)(!1),d=Object(a.a)(s,2),l=d[0],u=d[1],m=null,j=null,v=function(){e.setSlider(e.id,i)};if(e.device.slider){var h=e.device.sliderRange[0],b=e.device.sliderRange[1];j=Object(n.jsx)("div",{className:"device-card__slider",children:Object(n.jsx)("input",{type:"range",min:h,max:b,value:i,onMouseUp:v,onTouchEnd:v,onChange:function(e){var t=Number(e.target.value);r(t)}})});var f="".concat(O[e.device.name].sliderDescription,": \n        ").concat(i," \n        ").concat(O[e.device.name].sliderUnits);m=Object(n.jsx)("p",{className:"device-card__detail",children:f})}return l?Object(n.jsx)("div",{className:"device-card__delete",children:Object(n.jsx)(D,{deleteAction:function(){u(!1),e.deleteDevice(e.id)},CancelAction:function(){return u(!1)},elementName:"device"})}):Object(n.jsxs)("div",{className:"device-card",children:[Object(n.jsx)(_.a,{icon:O[e.device.name].icon,className:"device-card__icon"}),Object(n.jsxs)("div",{className:"device-card__info",children:[Object(n.jsx)("h4",{className:"device-card__name",children:e.device.name}),m]}),Object(n.jsx)(R,{toggleAction:function(){e.toggleDevice(e.id)},checkedValue:e.device.powerOn}),j,Object(n.jsx)("div",{className:"device-card__trash",children:Object(n.jsx)(E,{onClick:function(){return u(!0)}})})]})};var I=function(e){var t=e.addDevice,o=e.isDeviceAdded,i=e.setIsDeviceAdd,r=e.deviceName,s=e.setDeviceName,a=Object(c.useRef)(null),d=[],l=1,u=function(e){null===a.current||a.current.contains(e.target)||i(!1)};Object(c.useEffect)((function(){return document.addEventListener("mousedown",u),function(){document.removeEventListener("mousedown",u)}}));var m=Object(n.jsx)("option",{value:"",disabled:!0,children:"Choose device"},0);for(var j in d.push(m),O){var v=l++,h=Object(n.jsx)("option",{value:j,children:j},v);d.push(h)}return o?Object(n.jsxs)("div",{className:"display__flex",ref:a,children:[Object(n.jsx)("select",{className:"margin-left-right-1",onChange:function(e){return s(e.target.value)},children:d}),Object(n.jsx)(x,{onClick:function(){return t(r)}})]}):Object(n.jsx)(x,{onClick:function(){return i(!0)}})};o(46);var V=function(e,t,o){var i=e.match,r=Object(c.useState)(!1),s=Object(a.a)(r,2),l=s[0],m=s[1],j=Object(c.useState)(""),v=Object(a.a)(j,2),h=v[0],O=v[1],f=Number(i.params.id),p=t.roomList[f],g=function(e){if("number"!==typeof e)throw new Error("Device id should be typ of number");o(function(e,t){return{type:u.REMOVE_DEVICE,payload:{roomId:e,deviceId:t}}}(f,e))},x=function(e){if("number"!==typeof e)throw new Error("Device id should be typ of number");o(function(e,t){return{type:u.TOGGLE_DEVICE,payload:{roomId:e,deviceId:t}}}(f,e))},N=function(e,t){if("number"!==typeof t)throw new Error("Value should be typ of number");if("number"!==typeof e)throw new Error("Device id should be typ of number");o(function(e,t,o){return{type:u.SET_SLIDER,payload:{roomId:e,deviceId:t,numericValue:o}}}(f,e,t))},R=p.deviceList.map((function(e,t){return Object(n.jsx)(w,{id:t,device:e,toggleDevice:x,setSlider:N,deleteDevice:g},t)}));return Object(n.jsxs)("div",{className:"room-page",children:[Object(n.jsxs)("div",{className:"room-page__header",children:[Object(n.jsx)(d.b,{to:"/",className:"room-page__back",children:Object(n.jsx)(_.a,{icon:b.a})}),Object(n.jsx)("h3",{className:"room-page__name",children:p.name}),Object(n.jsx)("div",{className:"room-page__header__add",children:Object(n.jsx)(I,{addDevice:function(){""===h?alert("Enter room name"):(m(!1),o(function(e,t){return{type:u.ADD_DEVICE,payload:{roomId:e,deviceName:t}}}(f,h)),O(""))},isDeviceAdded:l,setIsDeviceAdd:m,deviceName:h,setDeviceName:O})})]}),Object(n.jsx)("div",{className:"room-page__devices",children:R})]})};var S=function(){var e=Object(c.useReducer)(j,new g("Olga")),t=Object(a.a)(e,2),o=t[0],i=t[1];return Object(n.jsx)("div",{className:"App",children:Object(n.jsx)(d.a,{basename:"/move-closer-recruitment/",children:Object(n.jsxs)(l.c,{children:[Object(n.jsx)(l.a,{exact:!0,path:"/",children:Object(n.jsx)(y,{homeState:o,addNewRoom:function(e){i({type:u.ADD_ROOM,payload:{newRoom:e}})},delRoom:function(e){i({type:u.REMOVE_ROME,payload:{removedRoomId:e}})},toggleRoom:function(e){i({type:u.TOGGLE_ROOM,payload:{toggledRoomId:e}})}})}),Object(n.jsx)(l.a,{path:"/room/:id",component:function(e){return V(e,o,i)}})]})})})};s.a.render(Object(n.jsx)(i.a.StrictMode,{children:Object(n.jsx)(S,{})}),document.getElementById("root"))}},[[47,1,2]]]);
//# sourceMappingURL=main.8c5c7d27.chunk.js.map